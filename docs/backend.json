
{
  "entities": {
    "InvoiceSubmission": {
      "title": "InvoiceSubmission",
      "type": "object",
      "description": "Represents an invoice submission received via webhook.",
      "properties": {
        "submissionDate": {
          "type": "string",
          "description": "The date and time the invoice was submitted.",
          "format": "date-time"
        },
        "invoiceData": {
          "type": "string",
          "description": "JSON string of the invoice data submitted."
        },
        "status": {
          "type": "string",
          "description": "The processing status of the invoice (e.g., 'pending', 'certified', 'failed')."
        },
        "hkaResponseId": {
          "type": "string",
          "description": "Reference to HKAResponse. (Relationship: InvoiceSubmission 1:1 HKAResponse)"
        }
      },
      "required": [
        "submissionDate",
        "invoiceData",
        "status"
      ]
    },
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the e-Factura Bridge system.",
      "properties": {
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "companyName": {
          "type": "string",
          "description": "The name of the company the user belongs to."
        },
        "role": {
          "type": "string",
          "description": "The role of the user in the system (e.g., 'admin', 'user').",
          "enum": ["admin", "user"]
        }
      },
      "required": [
        "email",
        "companyName",
        "role"
      ]
    },
    "Configuration": {
      "title": "Configuration",
      "type": "object",
      "description": "Represents system-wide or company-specific configurations.",
      "properties": {
        "companyId": {
          "type": "string",
          "description": "Unique identifier for the company this configuration applies to. If null, it's a system-wide setting."
        },
        "settingKey": {
          "type": "string",
          "description": "The key of the configuration setting."
        },
        "settingValue": {
          "type": "string",
          "description": "The value of the configuration setting."
        }
      },
      "required": [
        "settingKey",
        "settingValue"
      ]
    },
    "HKAResponse": {
      "title": "HKAResponse",
      "type": "object",
      "description": "Represents a response received from the HKA (The Factory HKA) service.",
      "properties": {
        "responseDate": {
          "type": "string",
          "description": "The date and time the response was received.",
          "format": "date-time"
        },
        "statusCode": {
          "type": "number",
          "description": "The HTTP status code of the response."
        },
        "responseBody": {
          "type": "string",
          "description": "The raw response body from the HKA."
        },
        "invoiceSubmissionId": {
          "type": "string",
          "description": "Reference to InvoiceSubmission. (Relationship: InvoiceSubmission 1:1 HKAResponse)"
        }
      },
      "required": [
        "responseDate",
        "statusCode",
        "responseBody"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profiles."
    },
    "/configurations/{configId}": {
      "schema": {
        "$ref": "#/entities/Configuration"
      },
      "description": "Stores system or company configurations."
    },
    "/invoiceSubmissions/{submissionId}": {
      "schema": {
        "$ref": "#/entities/InvoiceSubmission"
      },
      "description": "Logs all incoming invoice submissions from webhooks."
    },
    "/hkaResponses/{responseId}": {
      "schema": {
        "$ref": "#/entities/HKAResponse"
      },
      "description": "Logs all responses from the HKA API."
    }
  }
}
