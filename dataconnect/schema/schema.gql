# File: dataconnect/schema/schema.gql

"""
Represents a user of the e-Factura Bridge system.
"""
type User @table(name: "users") {
  email: String!
  companyName: String!
  role: String!
}

"""
Represents system-wide or company-specific configurations.
"""
type Configuration @table(name: "configurations") {
  companyId: String
  settingKey: String!
  settingValue: String!
}

"""
Represents an invoice submission received via webhook.
"""
type InvoiceSubmission @table(name: "invoiceSubmissions") {
  submissionDate: Timestamp!
  invoiceData: String!
  status: String!
  hkaResponseId: String
}

"""
Represents a response received from the HKA (The Factory HKA) service.
"""
type HKAResponse @table(name: "hkaResponses") {
  responseDate: Timestamp!
  statusCode: Int!
  responseBody: String!
  invoiceSubmissionId: String
}

type Query {
  listConfigurations: [Configuration] @auth(mode: "user")
  listInvoiceSubmissions: [InvoiceSubmission] @auth(mode: "user")
}
