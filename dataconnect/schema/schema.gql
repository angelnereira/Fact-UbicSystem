# GraphQL schema for Fact-UbicSystem

"""
Represents a user of the Fact-UbicSystem.
"""
type User @table(key: "userId") {
  userId: String! @db(default: "uuid()")
  email: String
  companyName: String
  role: String
}

"""
Represents system-wide or company-specific configurations.
"""
type Configuration @table(key: "configId") {
  configId: String! @db(default: "uuid()")
  companyId: String
  settingKey: String!
  settingValue: String
}

"""
Represents an invoice submission received via webhook.
"""
type InvoiceSubmission @table(key: "submissionId") {
  submissionId: String! @db(default: "uuid()")
  submissionDate: Timestamp!
  invoiceData: String!
  status: String!
  hkaResponseId: String
}

"""
Represents a response received from the HKA (The Factory HKA) service.
"""
type HKAResponse @table(key: "responseId") {
  responseId: String! @db(default: "uuid()")
  responseDate: Timestamp!
  statusCode: Int!
  responseBody: String!
  invoiceSubmissionId: String
}

type Query {
  listUsers: [User]
    @auth(
      providers: [
        {provider: "anonymous"}
        {provider: "password"}
      ]
    )
    @resolver(name: "dataconnect-example/listUsers")

  listConfigurations: [Configuration]
    @auth(
      providers: [
        {provider: "anonymous"}
        {provider: "password"}
      ]
    )
    @resolver(name: "dataconnect-example/listConfigurations")

  listInvoiceSubmissions: [InvoiceSubmission]
    @auth(
      providers: [
        {provider: "anonymous"}
        {provider: "password"}
      ]
    )
    @resolver(name: "dataconnect-example/listInvoiceSubmissions")

  listHkaResponses: [HKAResponse]
    @auth(
      providers: [
        {provider: "anonymous"}
        {provider: "password"}
      ]
    )
    @resolver(name: "dataconnect-example/listHkaResponses")
}
